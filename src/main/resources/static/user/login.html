<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <h2>ë¡œê·¸ì¸</h2>
    <hr>
    <div>
        <input type="text" id="email" name="email" required value="xxx@xxx.com">
    </div>
    <div>
        <input type="password" id="password" name="password" required value="password">
    </div>
    <br>
    <button onclick="login()">ë¡œê·¸ì¸</button>

    <hr>
    <a href="/user/signup.html">íšŒì›ê°€ì…</a>
    <hr>
    <a href="../index.html">í™ˆ í™”ë©´</a>
    <script>
         function login() {
             const email = document.getElementById('email').value;
             const password = document.getElementById('password').value;

             fetch('/auth/login', {
                 method: 'POST',
                 headers: {'Content-Type' : 'application/json'},
                 body: JSON.stringify({email, password})
             })
                 .then(response => {
                     console.log("ë¡œê·¸ì¸ ì‘ë‹µ status:", response.status);
                     return response.json();  // âœ… return ì¶”ê°€
                 })
                 .then(data => {
                     console.log("ë¡œê·¸ì¸ ì‘ë‹µ body:", data); // ğŸ‘‰ ì‘ë‹µ í™•ì¸ìš© ë¡œê·¸
                     if (data.data && data.data.token) {  // âœ… ì¡°ê±´ì€ data.data.token í™•ì¸
                         localStorage.setItem('token', data.data.token);  // âœ… ì €ì¥ë„ data.data.tokenìœ¼ë¡œ!
                         alert('ë¡œê·¸ì¸ ì„±ê³µ');
                         window.location.href='../index.html';
                     } else {
                         alert('ë¡œê·¸ì¸ ì‹¤íŒ¨!');
                     }
                 });
         }

    </script>
</body>
</html>